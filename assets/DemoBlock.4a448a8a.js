import{o as u,c as g,d as n,e as f,n as C,m as x,l as y,q as v,a as c,w as d,s as r,T as a,v as h,x as m,t as p,y as _,z as b}from"./app.a319b750.js";import{_ as E}from"./plugin-vue_export-helper.21dcd24c.js";var H=[{lang:"zh-CN","demo-block":{"hide-text":"\u9690\u85CF\u4EE3\u7801","show-text":"\u663E\u793A\u4EE3\u7801","copy-text":"\u590D\u5236\u4EE3\u7801","copy-success":"\u590D\u5236\u6210\u529F"}},{lang:"en-US","demo-block":{"hide-text":"Hide","show-text":"Expand","copy-text":"Copy","copy-success":"Successful"}}];const k={data(){return{hovering:!1,copied:!1,isExpanded:!1,fixedControl:!1,codeContentWidth:0,scrollParent:null}},props:{description:{type:String,required:!0},source:{type:String,required:!0},componentName:{type:String,required:!0},options:{type:Object,default:()=>({})}},computed:{decoded(){return decodeURIComponent(this.source)},decodeDesc(){return decodeURIComponent(this.description)},compoLang(){return this.options.locales||H},langConfig(){return this.compoLang.filter(e=>e.lang===this.$lang)[0]["demo-block"]},blockClass(){return`demo-${this.$lang} demo-${this.$route.path.split("/").pop().replace(".html","")}`},iconClass(){return this.isExpanded?"caret-top":"caret-bottom"},controlText(){return this.isExpanded?this.langConfig["hide-text"]:this.langConfig["show-text"]},copiedText(){return this.copied?this.langConfig["copy-success"]:this.langConfig["copy-text"]},codeArea(){return this.$el.getElementsByClassName("meta")[0]},codeAreaHeight(){return this.$el.getElementsByClassName("description").length>0?this.$el.getElementsByClassName("description")[0].clientHeight+this.$el.getElementsByClassName("code-content")[0].clientHeight+20:this.$el.getElementsByClassName("code-content")[0].clientHeight}},methods:{copyCode(){if(this.copied)return;const e=this.$el.querySelectorAll("pre")[0];e.setAttribute("contenteditable","true"),e.focus(),document.execCommand("selectAll",!1,null),this.copied=document.execCommand("copy"),e.removeAttribute("contenteditable"),setTimeout(()=>{this.copied=!1},1500)},scrollHandler(){const{top:e,bottom:o,left:l}=this.$refs.meta.getBoundingClientRect();this.fixedControl=o>document.documentElement.clientHeight&&e+44<=document.documentElement.clientHeight,this.$refs.control.style.left=this.fixedControl?`${l}px`:"0"},removeScrollHandler(){this.scrollParent&&this.scrollParent.removeEventListener("scroll",this.scrollHandler)}},watch:{isExpanded(e){if(this.codeArea.style.height=e?`${this.codeAreaHeight+1}px`:"0",!e){this.fixedControl=!1,this.$refs.control.style.left="0",this.removeScrollHandler();return}setTimeout(()=>{this.scrollParent=document,this.scrollParent&&this.scrollParent.addEventListener("scroll",this.scrollHandler),this.scrollHandler()},200)}},mounted(){this.$nextTick(()=>{const e=this.$el.getElementsByClassName("code-content")[0];this.codeContentWidth=this.$el.offsetWidth,this.$el.getElementsByClassName("description").length===0&&(e.style.width="100%",e.borderRight="none")})},beforeUnmount(){this.removeScrollHandler()}},B={class:"demo-content"},N={class:"meta",ref:"meta"},w=["innerHTML"];function S(e,o,l,T,t,s){return u(),g("div",{class:r(["demo-block",[s.blockClass,{hover:t.hovering}]]),onMouseenter:o[2]||(o[2]=i=>t.hovering=!0),onMouseleave:o[3]||(o[3]=i=>t.hovering=!1)},[n("div",B,[l.componentName?(u(),f(y(l.componentName),C(x({key:0},e.$attrs)),null,16)):v("",!0)]),n("div",N,[n("div",{class:"code-content",innerHTML:s.decoded},null,8,w)],512),n("div",{class:r(["demo-block-control",{"is-fixed":t.fixedControl}]),style:b({width:t.fixedControl?`${t.codeContentWidth}px`:"unset"}),ref:"control",onClick:o[1]||(o[1]=i=>t.isExpanded=!t.isExpanded)},[c(a,{name:"arrow-slide"},{default:d(()=>[n("i",{class:r([s.iconClass,{hovering:t.hovering},"icon"])},null,2)]),_:1}),c(a,{name:"text-slide"},{default:d(()=>[h(n("span",null,p(s.controlText),513),[[m,t.hovering]])]),_:1}),h(n("span",{class:r(["copy-action",{"copying ":t.copied}]),onClick:o[0]||(o[0]=_((...i)=>s.copyCode&&s.copyCode(...i),["stop"]))},p(s.copiedText),3),[[m,!t.copied]]),c(a,{name:"bounce"},{default:d(()=>[h(n("span",{class:"copy-action copy-action-success"},p(s.copiedText),513),[[m,t.copied]])]),_:1})],6)],34)}var L=E(k,[["render",S],["__scopeId","data-v-8293bdd0"]]);export{L as default};
